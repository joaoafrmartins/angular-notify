// Generated by CoffeeScript 1.7.1
(function() {
  module.exports = function(notifyOptions, notifyService, $rootScope, $compile, $filter) {
    return {
      restrict: "E",
      replace: true,
      scope: {
        notes: "="
      },
      controller: "NotifyController",
      template: "<div notify='true'>\n  <div notes='true'></ul>\n</div>",
      link: function(scope, elem, attrs) {
        var horizontal, list, timeout, vertical;
        list = elem.first();
        vertical = notifyOptions.vertical, horizontal = notifyOptions.horizontal;
        list.attr("vertical", vertical);
        list.attr("horizontal", horizontal);
        scope.attach(list);
        timeout = notifyOptions.timeout;
        return $rootScope.$on("$onNotifyNoteAdded", function(event, note) {
          var el, level, message, removeFn, title;
          level = note.level;
          title = $filter("translate")(note.title);
          message = $filter("translate")(note.message);
          el = $compile("<article note='true' level='" + level + "'>\n  <legend title='true'>\n    <i>" + title + "</i>\n    <i icon='true'></i>\n    <i close='true'></i>\n  </legend>\n  <div envelope='true'>\n    <a message='true'>" + message + "</a>\n  </div>\n</article>")(note);
          elem.prepend(el.hide().fadeIn(timeout * 0.1).delay(timeout * 0.7).fadeOut(timeout * 0.2));
          removeFn = (function() {
            return this.note.remove();
          }).bind({
            note: el
          });
          return setTimeout(removeFn, timeout);
        });
      }
    };
  };

}).call(this);
